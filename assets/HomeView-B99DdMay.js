import{_ as w,e as L,c as _,o as r,F as y,f as b,g as $,n as x,a as f,h as T,t as p,i as m,j as v,u as k,k as h,l as A,m as M,p as B,q as S,s as d,w as P,v as q,b as D}from"./index-Bz8LJTWn.js";import{_ as I}from"./ProductItemCard-BXR6iKLE.js";import"./index-CjrWYxnA.js";import"./index-CmtOSOj8.js";import"./index-DCVM4pwR.js";import"./index-dx4Bzad-.js";import"./index-DvY6Lppi.js";import"./constants-mROlI8bk.js";const N={class:"menuList flex items-center"},O=["onClick"],V={class:"menuList__name"},U={key:0,class:"menuList__subcategories flex gap-2"},j={__name:"TheTabs",props:{items:Array,isActiveTab:{type:String,default:"all",required:!0},isSubcategoryTab:{type:String,required:!0}},emits:["setActiveTab"],setup(l){return(o,u)=>{const s=L("auto-animate");return r(),_("ul",N,[(r(!0),_(y,null,b(l.items,e=>$((r(),_("li",{key:e,onClick:t=>o.$emit("setActiveTab",e,t),class:x(["menuList__item",[{menuList__item_active:l.isActiveTab===e.slug,menuList__item_sub:e.subcategories&&e.subcategories.length>0}]])},[f("span",V,p(e.name.toUpperCase()),1),l.isActiveTab===e.slug&&e.subcategories?(r(),_("ul",U,[(r(!0),_(y,null,b(e.subcategories,t=>(r(),_("li",{key:t,class:x(["menuList__subcategory",{menuList__subcategory_active:l.isSubcategoryTab===t.name}])},p(t.name.toUpperCase()),3))),128))])):T("",!0)],10,O)),[[s]])),128))])}}},F=w(j,[["__scopeId","data-v-dced5896"]]),z={__name:"CategoryTabs",props:{items:{type:Array,required:!0}},emits:["onCategoryClick"],setup(l,{emit:o}){const u=o;let s=m("all"),e=m("");const t=(a,g)=>{const n=g.target.innerText.toLowerCase();if(a.name===n&&s.value!==a.slug&&(s.value=a.slug,e.value="",u("onCategoryClick",a)),s.value!=="all"&&a.subcategories?.find(i=>i.name===n)){const i=a.subcategories.find(c=>{if(c.name===n)return c.slug});e.value=n,s.value=a.slug,u("onCategoryClick",i)}};return(a,g)=>(r(),v(F,{onSetActiveTab:t,"is-active-tab":k(s),"is-subcategory-tab":k(e),items:l.items},null,8,["is-active-tab","is-subcategory-tab","items"]))}},E={class:"mb-4 grid w-full grid-cols-2 gap-6 sm:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5"},H={__name:"InfiniteScrollingPagination",props:{cursor:[String,Number],disabled:{type:Boolean,default:!1},rootMargin:{type:String,default:"5%"}},emits:["loadMore"],setup(l,{emit:o}){const u=o,s=l,e=m(null);let t=null,a=!1;function g(){e.value&&(t||(t=new IntersectionObserver(n=>{if(n[0].isIntersecting){if(s.cursor==="end"||s.disabled)return;t&&e.value&&(t.unobserve(e.value),a=!1),u("loadMore")}},{root:null,rootMargin:s.rootMargin,threshold:0}),t.observe(e.value),a=!0))}return h(()=>{g()}),A(()=>{t&&(t.disconnect(),t=null)}),M(()=>[s.cursor,s.disabled],([n,i])=>{if(!t&&e.value){g();return}t&&e.value&&!a&&n!=="end"&&!i&&(t.observe(e.value),a=!0)}),(n,i)=>(r(),_("div",E,[B(n.$slots,"default"),f("div",{ref_key:"sentinel",ref:e,"aria-hidden":"true",style:{height:"1px",width:"100%"}},null,512)]))}},W={class:""},G={key:0},J={__name:"ProductsList",props:{category:{type:String,default:"all"}},setup(l){const o=m(null),u=l,s=S(),e=d(()=>s.errorMessage),t=d(()=>s.products),a=d(()=>u.category==="all"?t.value:t.value.filter(c=>c.category===u.category||c.subcategory===u.category)),{getData:g,syncWithLocalStorage:n}=s,i=async()=>{if(o.value==="end")return;const c=await g(o.value);o.value=c};return h(async()=>{const c=await g();o.value=c,n("favorites"),n("cart")}),(c,X)=>(r(),_("div",W,[e.value?(r(),_("div",G,p(e.value),1)):(r(),v(H,{key:1,cursor:o.value,onLoadMore:i},{default:P(()=>[(r(!0),_(y,null,b(a.value,C=>(r(),v(I,{key:C.id,item:C},null,8,["item"]))),128))]),_:1},8,["cursor"]))]))}},K={class:"container flex min-h-full flex-col items-center"},Q={class:"my-3 flex w-full justify-between"},R={__name:"TheCatalog",setup(l){const o=m("all"),u=S(),s=q(),e=d(()=>s.allCategories),t=d(()=>s.isCategory),a=d(()=>u.isProducts),{getAllCategories:g}=s,n=i=>{o.value=i.slug};return h(async()=>{try{await g()}catch(i){console.error("Ошибка загрузки данных:",i.message)}}),(i,c)=>(r(),_("div",K,[f("div",Q,[c[0]||(c[0]=f("h1",{class:"text-2xl font-bold sm:text-3xl md:text-4xl"},"Каталог",-1)),a.value&&t.value?(r(),v(z,{key:0,items:e.value,onOnCategoryClick:n},null,8,["items"])):T("",!0)]),D(J,{category:o.value},null,8,["category"])]))}},ne={__name:"HomeView",setup(l){return(o,u)=>(r(),v(R))}};export{ne as default};
