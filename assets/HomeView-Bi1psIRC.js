import{s as v}from"./v-lazy-image-Ec0guMIY.js";import{d as _,r as d,a as u,b as h,c as m,w as g,e as i,v as f,f as x,F as y,g as w,o as l,h as B}from"./index-Xrdqae12.js";import{_ as S}from"./ProductItem-CMJFHEoW.js";import{g as k}from"./products-CeCi0JnL.js";const D=_("products",()=>{const o=d(!0),e=d([]);return{pending:o,products:e,getData:async()=>{o.value=!0;try{e.value=await k()}catch(r){console.log(r)}finally{o.value=!1}}}}),b={class:"container flex min-h-full flex-col items-center"},F={style:{height:"6px"}},N={class:"mb-4 grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5"},I={__name:"HomeView",setup(o){const e=D(),n=u(()=>e.products),r=u(()=>e.pending),{getData:p}=e;return h(async()=>{try{await p();const s=localStorage.getItem("favorites");if(s)try{const t=JSON.parse(s);n.value.forEach(a=>{a.isFavorite=!!t.find(c=>c.id===a.id)})}catch(t){console.error("Ошибка парсинга избранных товаров(favorites):",t)}}catch(s){console.error("Ошибка загрузки данных:",s)}}),(s,t)=>{const a=v;return l(),m("div",b,[g(i("div",F,null,512),[[f,!r.value]]),g(x(a,{class:"w-screen",mode:"indeterminate",style:{height:"6px"}},null,512),[[f,r.value]]),t[0]||(t[0]=i("h1",{class:"my-3 mr-auto text-2xl font-bold sm:text-3xl md:text-4xl"},"Каталог",-1)),i("div",N,[(l(!0),m(y,null,w(n.value,c=>(l(),B(S,{key:c.id,item:c},null,8,["item"]))),128))])])}}};export{I as default};
